/*
This software is allowed to use under GPL or you need to obtain Commercial or Enterise License
to use it in non-GPL project. Please contact sales@dhtmlx.com for details
*/
(scheduler._temp_key_scope=function(){function j(b){delete b.rec_type;delete b.rec_pattern;delete b.event_pid;delete b.event_length}var h=!1,i,f=null;scheduler.attachEvent("onBeforeLightbox",function(){return h=!0});scheduler.attachEvent("onAfterLightbox",function(){h=!1;return!0});scheduler.attachEvent("onMouseMove",function(b,a){i=scheduler.getActionData(a).date});dhtmlxEvent(document,_isOpera?"keypress":"keydown",function(b){b=b||event;if(!h){var a=window.scheduler;if(b.keyCode==37||b.keyCode==
39){b.cancelBubble=!0;var l=a.date.add(a._date,b.keyCode==37?-1:1,a._mode);a.setCurrentView(l);return!0}var g=a._select_id;if(b.ctrlKey&&b.keyCode==67){if(g)a._buffer_id=g,f=!0,a.callEvent("onEventCopied",[a.getEvent(g)]);return!0}if(b.ctrlKey&&b.keyCode==88&&g){f=!1;a._buffer_id=g;var c=a.getEvent(g);a.updateEvent(c.id);a.callEvent("onEventCut",[c])}if(b.ctrlKey&&b.keyCode==86){if(c=a.getEvent(a._buffer_id)){var k=c.end_date-c.start_date;if(f){var e=a._lame_clone(c);j(e);e.id=a.uid();e.start_date=
new Date(i);e.end_date=new Date(e.start_date.valueOf()+k);a.addEvent(e);a.callEvent("onEventPasted",[f,e,c])}else{var d=a._lame_copy({},c);j(d);d.start_date=new Date(i);d.end_date=new Date(d.start_date.valueOf()+k);var m=a.callEvent("onBeforeEventChanged",[d,b,!1]);if(m)c.start_date=new Date(d.start_date),c.end_date=new Date(d.end_date),a.render_view_data(),a.callEvent("onEventPasted",[f,c,d]),f=!0}}return!0}}})})();
