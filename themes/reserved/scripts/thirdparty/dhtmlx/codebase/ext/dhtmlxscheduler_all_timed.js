/*
This software is allowed to use under GPL or you need to obtain Commercial or Enterise License
to use it in non-GPL project. Please contact sales@dhtmlx.com for details
*/
(function(){scheduler.config.all_timed="short";var l=function(a){return!((a.end_date-a.start_date)/36E5>=24)},m=scheduler._pre_render_events_line;scheduler._pre_render_events_line=function(a,f){function g(a){var b=i(a.start_date);return+a.end_date>+b}function i(a){var b=scheduler.date.add(a,1,"day");return b=scheduler.date.date_part(b)}function j(a,b){var c=scheduler.date.date_part(new Date(a));c.setHours(b);return c}if(!this.config.all_timed)return m.call(this,a,f);for(var d=0;d<a.length;d++){var e=
a[d];if(!e._timed)if(this.config.all_timed=="short"&&!l(e))a.splice(d--,1);else{var b=this._lame_copy({},e);b.start_date=new Date(b.start_date);if(g(e)){if(b.end_date=i(b.start_date),this.config.last_hour!=24)b.end_date=j(b.start_date,this.config.last_hour)}else b.end_date=new Date(e.end_date);var h=!1;b.start_date<this._max_date&&b.end_date>this._min_date&&b.start_date<b.end_date&&(a[d]=b,h=!0);var c=this._lame_copy({},e);c.end_date=new Date(c.end_date);c.start_date=c.start_date<this._min_date?j(this._min_date,
this.config.first_hour):j(i(e.start_date),this.config.first_hour);c.start_date<this._max_date&&c.start_date<c.end_date&&(h?a.splice(d+1,0,c):a[d--]=c)}}var k=this._drag_mode=="move"?!1:f;return m.call(this,a,k)};var h=scheduler.get_visible_events;scheduler.get_visible_events=function(a){return!this.config.all_timed||!this.config.multi_day?h.call(this,a):h.call(this,!1)};scheduler.attachEvent("onBeforeViewChange",function(a,f,g){scheduler._allow_dnd=g=="day"||g=="week";return!0});scheduler._is_main_area_event=
function(a){return!(!a._timed&&!(this.config.all_timed===!0||this.config.all_timed=="short"&&l(a)))};var k=scheduler.updateEvent;scheduler.updateEvent=function(a){var f=scheduler.config.all_timed&&!(scheduler.isOneDayEvent(scheduler._events[a])||scheduler.getState().drag_id);if(f){var g=scheduler.config.update_render;scheduler.config.update_render=!0}k.apply(scheduler,arguments);if(f)scheduler.config.update_render=g}})();
